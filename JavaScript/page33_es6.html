<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>page33_es6.html</title>
    </head>
    <body>
        <h1>ES6 (2015) - ECMAScript의 약자로 자바스크립트 표준 규격을 나타내는 용어</h1>
        <hr />
        <script>
            //[1] 변수, 상수- let, const 키워드
            //[2] 템플릿 리터럴 - 백틱`` 안에 ${변수 or 수식} 표현식 가능
            let num = 100; //변수
            const pi = 3.14; //상수
            document.write(`num=${num}, pi=${pi}<br>`);
            //[3] 화살표 함수
            function foo(num) {
                return `num: ${num}<br>`;
            }

            const foo2 = function (num) {
                return `num: ${num}<br>`;
            };
            //화살표 함수
            const foo3 = (num) => {
                return `num: ${num}<br>`;
            };
            const foo4 = (num) => `<h3>num:${num}</h3>`;

            document.write(foo(300));
            document.write(foo2(500));
            document.write(foo3(800));
            document.write(foo4(1100));
            // [4] 구조 분해 할당 (Destructuring Assignment)
            //: 배열이나 객체의 속성을 쉽게 분해하여 변수에 할당하는 문법
            const person = {
                name: '홍길동',
                age: 22,
                addr: '서울',
            };
            // person의 name, age, addr 출력하기
            document.write(`name: ${person.name}, age: ${person.age}, addr: ${person.addr}`);

            const { name, addr, age } = person; //구조분해 할당, 비구조화 할당
            document.write('<hr>');
            document.write(`name: ${name}, age: ${age}, addr: ${addr}<br>`);
            //let name = 'hi'; [x]

            //배열 구조분해 할당
            const arr = [1, 2, 3];

            const [a, b, c] = arr;
            document.write(a, b, c, '<br>');

            //일부 할당
            const [x, y] = arr;
            document.write(`${x}, ${y}<br>`);
            // ... (spread 연산자) : 전개 연산자, 나머지 연산자
            const [first, ...rest] = arr;
            document.write(`${first}, rest: ${rest}, ${rest[0]}, ${rest[1]}<br>`);
            //first:1, rest:[2,3]

            //기본값 할당
            const [p, q, r, s = 5] = arr;
            document.write(`${p},${q},${r},${s}<br>`);

            const obj = { name: 'Alice', age: 23, city: 'Seoul' };

            //속성명 변경
            const { name: nm, age: ag, city } = obj;

            mprint(`${nm}, ${ag}, ${city}`);

            // 중첩 객체 구조 분해
            const user = {
                id: 1,
                profile: {
                    firstName: 'Alice',
                    lastName: 'Park',
                },
            };
            mprint(`${user.id}, ${user.profile.firstName} ${user.profile.lastName}`);

            // user를 구조분해 할당해보자
            const {
                id,
                profile: { firstName, lastName: lName },
            } = user;

            mprint(`${id}, ${firstName}, ${lName}`);
            function mprint(str) {
                document.write(str, '<hr>');
            }

            // 객체 매개변수 구조분해
            function greet({ name, age }) {
                mprint(`Hello my name is ${name} and I am ${age} years old`);
            }
            greet(obj);
            const sum = ([i, k]) => i + k;
            mprint(sum(arr));
            // [5] Spread 연산자: 배열이나 객체를 펼칠 때 사용
            const arr1 = [1, 2, 3, 4, 5];
            const arr2 = [...arr1]; //사본
            const arr3 = arr1; //arr1의 주소값을 할당

            mprint(arr1);
            mprint(arr2);
            mprint(arr3);

            arr3[0] = 100;
            mprint(arr1); //[100,2,3,4,5]
            mprint(arr2); //[1,2,3,4,5]
            mprint(arr3); //[100,2,3,4,5]

            const arr4 = [1, 2, 3];
            const newArr = [0, ...arr4, 4];
            mprint(newArr);

            //객체
            const ob1 = { a: 10, b: 20 };
            //사본
            const ob2 = { ...ob1 };
            mprint(ob1);
            //객체를 문자열로 직렬화는 메서드: JSON.stringify(객체)  : object=> string로 변환
            //문자열을 json객체로 변환하는 메서드: JSON.parse(문자열) : string=> object로 변환
            mprint(JSON.stringify(ob1));
            mprint(JSON.stringify(ob2));

            //객체 병합
            const ob3 = { c: 'Hello', d: 'Hi' };
            const merged = { ...ob1, ...ob3 };
            mprint(JSON.stringify(merged)); //{"a":10,"b":20,"c":"Hello","d":"Hi"}
            const ob4 = { ...merged, c: 3.14 }; //속성 덮어쓰기
            mprint(JSON.stringify(ob4)); //{"a":10,"b":20,"c":3.14,"d":"Hi"}

            //String
            let str1 = 'Hello JavaScript';
            let str2 = [...str1];
            let str3 = str1.split('');
            mprint(str2);
            mprint(str3);
            document.write(Array.isArray(str3));
        </script>
    </body>
</html>
<!-- page33_es6.html -->
